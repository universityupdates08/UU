<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Exam Schedule Portal</title>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<style>

:root{
--morning-grad: linear-gradient(135deg,#4fb7ff,#0066ff);
--evening-grad: linear-gradient(135deg,#9b59ff,#6a00ff);
--yellow-grad: linear-gradient(135deg,#ffd84d,#ffb300);
}

body{
font-family:Arial;
background:#eef2f7;
padding:40px;
text-align:center;
}

.container{
background:white;
padding:30px;
border-radius:12px;
width:90%;
margin:auto;
box-shadow:0 8px 20px rgba(0,0,0,0.1);
}

/* TODAY PANEL */

.today-panel{
background:#e8fff0;
border:2px solid #00c853;
padding:20px;
border-radius:10px;
margin-bottom:25px;
}

.today-title{
font-size:1.3rem;
font-weight:bold;
margin-bottom:10px;
color:#007e33;
}

/* WARNING */

.warning{
background:#fff3cd;
border:1px solid #ffeeba;
padding:15px;
margin-bottom:20px;
border-radius:8px;
color:#856404;
text-align:left;
}

.row{
margin:20px 0;
padding:20px;
border-radius:10px;
}

.row1{background:#e8f1ff;}
.row2{background:#e9f9ef;}
.row3{background:#fff1f1;}
.row4{background:#fff8e1;}

.controls{
display:flex;
gap:10px;
flex-wrap:wrap;
}

.controls input,
.controls select,
.controls button{
flex:1;
padding:10px;
border-radius:6px;
border:1px solid #ccc;
}

.controls button{
background:#2c7be5;
color:white;
border:none;
cursor:pointer;
}

/* CARD GRID */

.results-grid{
margin-top:20px;
display:grid;
grid-template-columns:repeat(auto-fill,minmax(230px,1fr));
gap:15px;
}

/* CARDS */

.card{
color:white;
border-radius:12px;
padding:14px;
box-shadow:0 3px 14px rgba(0,0,0,0.25);
text-align:left;
font-size:90%;
position:relative;
}

/* SHIFT COLORS */

.morning{
background:var(--morning-grad);
}

.evening{
background:var(--evening-grad);
}

/* NEXT EXAM */

.next-exam{
outline:4px solid #00c853;
box-shadow:0 0 15px #00c853;
}

/* CODE CARD */

.yellow-card{
background:var(--yellow-grad);
color:#333;
border-radius:12px;
padding:16px;
box-shadow:0 4px 15px rgba(255,180,0,0.4);
max-width:350px;
margin:auto;
}

/* HEADER */

.card-header{
border-bottom:1px solid rgba(255,255,255,0.3);
padding-bottom:6px;
margin-bottom:8px;
}

.card-date{
font-size:1.1rem;
font-weight:bold;
}

.card-day{
font-size:0.8rem;
opacity:0.9;
}

.badge{
background:rgba(0,0,0,0.25);
padding:3px 8px;
border-radius:6px;
font-size:0.75rem;
margin-right:4px;
}

/* COUNTDOWN */

.countdown{
font-size:0.8rem;
margin-top:6px;
background:rgba(0,0,0,0.25);
padding:4px 6px;
border-radius:6px;
display:inline-block;
}

/* CENTER CARD */

.center-card{
display:flex;
justify-content:center;
margin-top:20px;
}

/* TABLE */

table{
width:100%;
border-collapse:collapse;
margin-top:10px;
font-size:75%;
background:white;
color:black;
}

th,td{
border:1px solid #ddd;
padding:6px;
text-align:center;
}

th{
background:#2c7be5;
color:white;
}

tr:nth-child(even){
background:#f2f2f2;
}

</style>
</head>

<body>

<div class="container">

<h2>Exam Schedule Portal</h2>

<!-- TODAY PANEL -->

<div class="today-panel">

<div class="today-title">ðŸ“… Today's Exams</div>

<div id="todayExams" class="results-grid"></div>

</div>

<div class="warning">
âš  Verify exam schedule with official notification.
</div>

<!-- SEARCH BY DATE -->

<div class="row row1">

<h3>SEARCH BY DATE</h3>

<div class="controls">
<input type="date" id="date1">
<button onclick="searchByDate()">Search</button>
</div>

<div id="dateResults"></div>

</div>

<!-- CLASS SUBJECT -->

<div class="row row2">

<h3>SEARCH BY CLASS & SUBJECT</h3>

<div class="controls">
<select id="class2"><option>Select Class</option></select>
<select id="subject2"><option>Select Subject</option></select>
<button onclick="searchByClassSubject()">Search</button>
</div>

<div id="resultRow2" class="center-card"></div>

</div>

<!-- DATE CLASS -->

<div class="row row3">

<h3>SEARCH BY DATE & CLASS</h3>

<div class="controls">
<input type="date" id="date3">
<select id="class3"><option>Select Class</option></select>
<button onclick="searchByDateClass()">Search</button>
</div>

<div id="resultRow3" class="results-grid"></div>

</div>

<!-- CODE -->

<div class="row row4">

<h3>SEARCH BY CODE</h3>

<div class="controls">
<select id="code4"><option>Select Code</option></select>
<button onclick="searchByCode()">Search</button>
</div>

<div id="resultRow4"></div>

</div>

</div>

<script>

let csvData=[];

Papa.parse("DatesheetSearch.csv",{
download:true,
header:true,
skipEmptyLines:true,

complete:function(results){
csvData=results.data;
populateFilters();
showTodayExams();
}

});

/* DATE PARSER */

function parseExamDate(dateStr){

const parts=dateStr.split("-");
const day=parts[0];
const month=parts[1];
const year="20"+parts[2];

return new Date(`${month} ${day}, ${year}`);

}

/* TODAY PANEL */

function showTodayExams(){

const today=new Date();

const todayStr=today.getDate()+"-"+today.toLocaleString('en-US',{month:'short'})+"-"+today.getFullYear().toString().slice(-2);

const todayData=csvData.filter(r=>r.Date===todayStr);

const container=document.getElementById("todayExams");

if(todayData.length===0){

container.innerHTML="<p>No Exam Today</p>";
return;

}

todayData.forEach(r=>{

const shift=r.Shift.toLowerCase().includes("morning")?"morning":"evening";

container.innerHTML+=`

<div class="card ${shift} next-exam">

<div class="card-header">
<div class="card-date">${r.Date}</div>
<div class="card-day">${r.Day}</div>
</div>

<b>${r.Subject}</b>

<div>${r.Class}</div>
<div>${r.Course}</div>

<div class="badge">Code ${r.Code}</div>
<div class="badge">${r.Shift}</div>

<div class="countdown">Exam Today</div>

</div>

`;

});

}

/* OTHER FUNCTIONS REMAIN SAME (SEARCH + DISPLAY) */

/* For brevity they are identical to the previous version */

</script>

</body>
</html>
