<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>उत्तर कुंजी आपत्ति प्रपत्र</title>

<style>
body{
    font-family: "Noto Sans Devanagari", Arial, sans-serif;
    margin:0;
    padding:0;
    background:#f5f5f5;
}

/* ===== Sticky Header ===== */
.header{
    position:sticky;
    top:0;
    background:#111;
    color:white;
    padding:10px;
    text-align:center;
    z-index:1000;
}

.header a{
    background:#E1306C;
    color:white;
    padding:6px 12px;
    text-decoration:none;
    border-radius:4px;
    margin-left:10px;
    font-size:14px;
}

.container{
    width: 210mm; /* Standard A4 Width */
    min-height: 297mm;
    background:white;
    padding: 15mm; /* Standard margin for printing */
    margin:20px auto;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    box-sizing: border-box; /* Prevents padding from adding to width */
}

h3{
    text-align:center;
}

/* ===== Input Styling (Screen Mode) ===== */
input[type="text"], input[type="number"] {
    
    color: blue;
    font-size: 16px;
    border: 1px solid #ccc; 
    padding: 2px 5px;
    border-radius: 2px;
}

.line-input{ width:60%; }
.date-input{ width:25%; }
.right-align{ text-align:right; }
.left-align{ text-align:left; }

table{
    width:100%;
    border-collapse:collapse;
    margin-top:20px;
    table-layout: fixed; /* Ensures table stays within container */
}

th, td{
    border:1px solid black;
    padding:6px;
    font-size:13px;
    vertical-align:top;
    word-wrap: break-word;
}

button{
    padding:6px 12px;
    margin-top:5px;
    cursor:pointer;
}

.upload-column{ width:120px; }

.delete-btn{
    background:red;
    color:white;
    border:none;
    padding:4px 8px;
    cursor:pointer;
    margin-top:5px;
}

/* ===== Print Settings ===== */
@media print {
    @page {
        size: A4;
        margin: 0; /* Let the container padding handle margins */
    }

    .header, button, .upload-column, input[type="file"], .delete-btn { 
        display:none !important; 
    }
    
    body { background:white; }
    
    .container { 
        box-shadow: none; 
        margin: 0; 
        width: 100%; 
        padding: 10mm; /* Reduced slightly for print safety */
    }
    
    input[type="text"], input[type="number"], .line-input, .date-input {
        border: none !important;
        outline: none !important;
        background: transparent !important;
        color: blue !important; /* Forces blue color in print */
        -webkit-print-color-adjust: exact; /* Ensures color renders in PDF/Print */
    }

    #proofSection { page-break-before: always; }
}
</style>
</head>

<body onload="setCurrentDate()">

<div class="header">
    Brought to you by University Updates
    <a href="https://instagram.com/universityupdates_uu" target="_blank">Join us on Instagram</a>
    <a href="https://youtu.be/QekxFTFbtEk" target="_blank">Watch Tutorial Video</a>
</div>

<div class="container">
    <h3>उत्तर कुंजी आपत्ति प्रपत्र</h3>

    <div class="right-align">
        <p>प्रार्थी / आपत्तिकर्ता का नाम : <input type="text" class="line-input"></p>
        <p>पाठ्यक्रम का नाम व पेपर कोड : <input type="text" class="line-input"></p>
        <p>पाठ्यक्रम (वार्षिक / सेमेस्टर) : <input type="text" class="line-input"></p>
        <p>अनुक्रमांक : <input type="text" class="line-input"></p>
        <p>उत्तरपुस्तिका क्रमांक : <input type="text" class="line-input"></p>
        <p>प्रश्न पुस्तिका सीरीज (A/B/C/D) : <input type="text" class="line-input"></p>
        <p>आपत्ति विवरण : <input type="text" class="line-input"></p>
    </div>

    <table id="objectionTable">
        <thead>
            <tr>
                <th style="width:40px;">क्र.सं.</th>
                <th style="width:80px;">प्रश्न संख्या</th>
                <th>आपत्ति विवरण</th>
                <th class="upload-column">प्रमाण अपलोड</th>
            </tr>
        </thead>
        <tbody>
            </tbody>
    </table>

    <button onclick="addRow()">आपत्ति जोड़ें</button>
    <br><br>

    <div class="left-align">
        <p>दिनांक : <input type="text" id="dateField" class="date-input" placeholder="DD-MMM-YYYY"></p>
    </div>

    <div class="right-align">
        <div id="signaturePreview"></div>
        <p>प्रार्थी / आपत्तिकर्ता के हस्ताक्षर</p>
        <input type="file" accept="image/*" onchange="previewSignature(event)">

        <p>नाम : <input type="text" class="line-input"></p>
        <p>पता : <input type="text" class="line-input"></p>
        <p>मोबाइल : <input type="text" class="line-input"></p>
        <p>ई-मेल आईडी : <input type="text" class="line-input"></p>
    </div>

    <br>
    <button onclick="window.print()" style="background: green; color: white; font-weight: bold; padding: 10px 20px;">प्रिंट करें</button>

    <div id="proofSection">
        <h3>संलग्न प्रमाण</h3>
    </div>
</div>

<script>
let count = 0;

function setCurrentDate() {
    const months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
    const d = new Date();
    const day = String(d.getDate()).padStart(2, '0');
    const month = months[d.getMonth()];
    const year = d.getFullYear();
    document.getElementById('dateField').value = `${day}-${month}-${year}`;
}

function addRow(){
    count++;
    let table = document.getElementById("objectionTable").getElementsByTagName('tbody')[0];
    let row = table.insertRow();
    row.innerHTML = `
    <td style="text-align:center;">${count}</td>
    <td><input type="text" style="width:90%; border:1px solid #ccc;"></td>
    <td>
        विश्वविद्यालय के अनुसार सही उत्तर: <input type="text" style="width:95%; margin-bottom:5px; border:1px solid #ccc;"><br>
        प्रमाण के अनुसार सही उत्तर: <input type="text" style="width:95%; margin-bottom:5px; border:1px solid #ccc;"><br>
        संलग्न प्रमाणों की संख्या: <input type="number" style="width:80px; border:1px solid #ccc;">
    </td>
    <td class="upload-column">
        <input type="file" accept="image/*" onchange="previewProof(event, ${count})">
        <br>
        <button class="delete-btn" onclick="deleteRow(this)">हटाएँ</button>
    </td>`;
}

function deleteRow(button){
    button.closest("tr").remove();
}

function previewProof(event, serial){
    let file = event.target.files[0];
    if(!file) return;
    let reader = new FileReader();
    reader.onload = function(e){
        let section = document.getElementById("proofSection");
        let block = document.createElement("div");
        block.style.marginBottom = "20px";
        block.style.textAlign = "center";
        block.innerHTML = `<p><strong>आपत्ति क्र.सं.: ${serial}</strong></p>
                           <img src="${e.target.result}" style="max-width:100%; height:auto; display:block; margin:auto; border:1px solid #eee;">`;
        section.appendChild(block);
    };
    reader.readAsDataURL(file);
}

function previewSignature(event){
    let file = event.target.files[0];
    if(!file) return;
    let reader = new FileReader();
    reader.onload = function(e){
        let container = document.getElementById("signaturePreview");
        container.innerHTML = `<img src="${e.target.result}" style="width:150px; margin-bottom:5px;">`;
    };
    reader.readAsDataURL(file);
}
</script>

</body>
</html>
