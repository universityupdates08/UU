<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Exam Schedule Finder</title>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<style>

body{
font-family:Arial;
background:#eef2f7;
padding:40px;
text-align:center;
}

.container{
background:white;
padding:30px;
border-radius:12px;
width:90%;
margin:auto;
box-shadow:0 8px 20px rgba(0,0,0,0.1);
}

.row{
margin:20px 0;
padding:15px;
border-bottom:1px solid #ddd;
}

input,select,button{
padding:10px;
margin:8px;
border-radius:6px;
border:1px solid #ccc;
}

button{
background:#2c7be5;
color:white;
border:none;
cursor:pointer;
}

/* Card Results */

.cards{
margin-top:30px;
display:grid;
grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
gap:20px;
}

.card{
padding:20px;
border-radius:12px;
color:white;
background:linear-gradient(135deg,#6a5cff,#4fb7ff);
box-shadow:0 6px 15px rgba(0,0,0,0.2);
text-align:left;
}

.card span{
display:block;
margin-top:5px;
}

/* Table Style */

table{
width:100%;
border-collapse:collapse;
margin-top:20px;
}

th,td{
border:1px solid #ddd;
padding:8px;
text-align:center;
}

th{
background:#2c7be5;
color:white;
}

tr:nth-child(even){
background:#f2f2f2;
}

</style>
</head>

<body>

<div class="container">

<h2>Exam Schedule Finder</h2>

<!-- ROW 1 DATE -->
<div class="row">

<h3>Search By Date</h3>

<input type="date" id="date1">
<button onclick="searchByDate()">Search</button>

<div id="dateResults"></div>

</div>


<!-- ROW 2 CLASS + SUBJECT -->
<div class="row">

<h3>Search By Class & Subject</h3>

<select id="class2">
<option value="">Select Class</option>
</select>

<select id="subject2">
<option value="">Select Subject</option>
</select>

<button onclick="searchByClassSubject()">Search</button>

</div>


<!-- ROW 3 DATE + CLASS -->
<div class="row">

<h3>Search By Date & Class</h3>

<input type="date" id="date3">

<select id="class3">
<option value="">Select Class</option>
</select>

<button onclick="searchByDateClass()">Search</button>

</div>

<div id="resultCards" class="cards"></div>

</div>

<script>

let csvData=[];

Papa.parse("DatesheetSearch.csv",{

download:true,
header:true,
skipEmptyLines:true,

complete:function(results){

csvData=results.data;
populateFilters();

}

});


function populateFilters(){

const classes=new Set();
const subjects=new Set();

csvData.forEach(r=>{

classes.add(r.Class);
subjects.add(r.Subject);

});

const class2=document.getElementById("class2");
const class3=document.getElementById("class3");
const subject2=document.getElementById("subject2");

classes.forEach(c=>{
class2.innerHTML+=`<option value="${c}">${c}</option>`;
class3.innerHTML+=`<option value="${c}">${c}</option>`;
});

subjects.forEach(s=>{
subject2.innerHTML+=`<option value="${s}">${s}</option>`;
});

}


function formatDate(dateInput){

const d=new Date(dateInput);

const day=d.getDate();
const month=d.toLocaleString('en-US',{month:'short'});
const year=d.getFullYear().toString().slice(-2);

return `${day}-${month}-${year}`;

}


function searchByDate(){

const date=document.getElementById("date1").value;

if(!date){
alert("Please select date");
return;
}

const formatted=formatDate(date);

const results=csvData.filter(r=>r.Date===formatted);

displayDateResults(results);

document.getElementById("resultCards").innerHTML="";

}


function searchByClassSubject(){

const c=document.getElementById("class2").value;
const s=document.getElementById("subject2").value;

const results=csvData.filter(r=>r.Class===c && r.Subject===s);

displayResults(results);

document.getElementById("dateResults").innerHTML="";

}


function searchByDateClass(){

const date=document.getElementById("date3").value;
const c=document.getElementById("class3").value;

const formatted=formatDate(date);

const results=csvData.filter(r=>r.Date===formatted && r.Class===c);

displayResults(results);

document.getElementById("dateResults").innerHTML="";

}


function displayDateResults(data){

const container=document.getElementById("dateResults");

container.innerHTML="";

if(data.length===0){

container.innerHTML="<p>No Exam Found</p>";
return;

}

let table=`
<table>
<thead>
<tr>
<th>S.No</th>
<th>Date</th>
<th>Day</th>
<th>Class</th>
<th>Course</th>
<th>Subject</th>
<th>Code</th>
<th>Shift</th>
</tr>
</thead>
<tbody>
`;

data.forEach((r,index)=>{

table+=`
<tr>
<td>${index+1}</td>
<td>${r.Date}</td>
<td>${r.Day}</td>
<td>${r.Class}</td>
<td>${r.Course}</td>
<td>${r.Subject}</td>
<td>${r.Code}</td>
<td>${r.Shift}</td>
</tr>
`;

});

table+=`</tbody></table>`;

container.innerHTML=table;

}


function displayResults(data){

const container=document.getElementById("resultCards");

container.innerHTML="";

if(data.length===0){

container.innerHTML="<p>No Exam Found</p>";
return;

}

data.forEach(r=>{

container.innerHTML+=`

<div class="card">

<h3>${r.Subject}</h3>

<span><b>Date:</b> ${r.Date}</span>
<span><b>Day:</b> ${r.Day}</span>
<span><b>Class:</b> ${r.Class}</span>
<span><b>Course:</b> ${r.Course}</span>
<span><b>Shift:</b> ${r.Shift}</span>
<span><b>Code:</b> ${r.Code}</span>

</div>

`;

});

}

</script>

</body>
</html>
