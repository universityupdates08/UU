<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Exam Schedule Finder</title>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<style>

body{
font-family: Arial;
background:#f5f5f5;
text-align:center;
padding:40px;
}

.container{
background:white;
padding:30px;
border-radius:10px;
width:80%;
margin:auto;
box-shadow:0 0 10px rgba(0,0,0,0.1);
}

input,button{
padding:10px;
margin:10px;
}

table{
width:100%;
border-collapse:collapse;
margin-top:20px;
}

th,td{
border:1px solid #ccc;
padding:10px;
}

th{
background:#2c7be5;
color:white;
}

</style>
</head>

<body>

<div class="container">

<h2>Exam Date Sheet Search</h2>

<label>Select Date:</label>
<input type="date" id="searchDate">

<button onclick="searchExam()">Search</button>

<table id="resultTable">
<thead>
<tr>
<th>Date</th>
<th>Day</th>
<th>Shift</th>
<th>Class</th>
<th>Subject</th>
<th>Course</th>
<th>Code</th>
</tr>
</thead>
<tbody></tbody>
</table>

</div>

<script>

let csvData = [];

// Load CSV from GitHub repository
Papa.parse("DatesheetSearch.csv", {

download: true,
header: true,
skipEmptyLines: true,

complete: function(results){
csvData = results.data;
console.log("CSV Loaded", csvData);
}

});

function searchExam(){

const dateInput = document.getElementById("searchDate").value;

if(!dateInput){
alert("Please select a date");
return;
}

const selectedDate = new Date(dateInput);

const day = selectedDate.getDate();
const month = selectedDate.toLocaleString('en-US',{month:'short'});
const year = selectedDate.getFullYear().toString().slice(-2);

const formattedDate = `${day}-${month}-${year}`;

const results = csvData.filter(row => row.Date === formattedDate);

const tableBody = document.querySelector("#resultTable tbody");

tableBody.innerHTML="";

if(results.length === 0){
tableBody.innerHTML="<tr><td colspan='7'>No Exam Found</td></tr>";
return;
}

results.forEach(r => {

tableBody.innerHTML += `
<tr>
<td>${r.Date}</td>
<td>${r.Day}</td>
<td>${r.Shift}</td>
<td>${r.Class}</td>
<td>${r.Subject}</td>
<td>${r.Course}</td>
<td>${r.Code}</td>
</tr>
`;

});

}

</script>

</body>
</html>
